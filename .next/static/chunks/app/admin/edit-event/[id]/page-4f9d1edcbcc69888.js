(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{7114:function(e,t,r){Promise.resolve().then(r.bind(r,8252))},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:m="",children:u,...g}=r;return(0,s.createElement)("svg",{ref:i,...a,width:o,height:o,stroke:l,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(n(e)),m].join(" "),...g},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},3639:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},8252:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),a=r(2265),n=r(9376),i=r(5863),l=r(3639),o=r(2660);let d=(0,r(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var c=r(8930);let m={id:"",title:"",date:"",time:"",djs:[],specials:[],imageUrl:"",instagram:"",website:"",address:""};var u=()=>{let e=(0,n.useRouter)(),t=(0,n.useParams)(),r=null==t?void 0:t.id,[u,g]=(0,a.useState)(m),[x,h]=(0,a.useState)(!0),[f,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(null),k=e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(e){return""}},E=(e,t)=>{if(t&&/^\d{2}:\d{2}$/.test(t))return t;if(!e)return"";try{let t=new Date(e),r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0");return"".concat(r,":").concat(s)}catch(e){return""}};(0,a.useEffect)(()=>{r?(h(!0),j(null),N(null),(async()=>{try{let e=await fetch("/api/events/".concat(r));if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to fetch event: ".concat(e.statusText))}let t=await e.json();g({id:t.id,title:t.title||"",date:k(t.date),time:t.time||E(t.date,t.time),djs:Array.isArray(t.djs)?t.djs:[],specials:Array.isArray(t.specials)?t.specials:[],imageUrl:t.imageUrl||"",instagram:t.instagram||"",website:t.website||"",address:t.address||""})}catch(e){console.error("Error fetching event:",e),j(e.message||"An unknown error occurred while fetching event data.")}finally{h(!1)}})()):(j("Event ID is missing."),h(!1))},[r]);let Z=e=>{let{name:t,value:r}=e.target;g(e=>({...e,[t]:r}))},A=(e,t)=>{let{value:r}=e.target;g(e=>({...e,[t]:r.split(",").map(e=>e.trim()).filter(e=>e)}))},C=async e=>{if(e.preventDefault(),!r)return;if(p(!0),j(null),N(null),!u.title||!u.date||!u.imageUrl){j("Title, Date, and Image URL are required."),p(!1);return}if(u.time&&!/^\d{2}:\d{2}$/.test(u.time)){j("Time must be in HH:MM format if provided."),p(!1);return}let t={title:u.title,date:u.date,time:u.time||null,djs:u.djs,specials:u.specials,imageUrl:u.imageUrl,instagram:u.instagram||null,website:u.website||null,address:u.address||null};try{let e=await fetch("/api/events/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to update event: ".concat(e.statusText))}let s=await e.json();N("Event updated successfully!"),g({id:s.id,title:s.title||"",date:k(s.date),time:s.time||E(s.date,s.time),djs:Array.isArray(s.djs)?s.djs:[],specials:Array.isArray(s.specials)?s.specials:[],imageUrl:s.imageUrl||"",instagram:s.instagram||"",website:s.website||"",address:s.address||""})}catch(e){console.error("Error updating event:",e),j(e.message||"An unknown error occurred while updating the event.")}finally{p(!1)}},S=async()=>{if(r&&window.confirm("Are you sure you want to delete this event? This action cannot be undone.")){y(!0),j(null),N(null);try{let t=await fetch("/api/events/".concat(r),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete event: ".concat(t.statusText))}N("Event deleted successfully!"),e.push("/")}catch(e){console.error("Error deleting event:",e),j(e.message||"An unknown error occurred while deleting the event.")}finally{y(!1)}}};return x?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-6",children:[(0,s.jsx)(i.Z,{className:"animate-spin h-12 w-12 text-neon-green mb-4"}),(0,s.jsx)("p",{className:"text-xl",children:"Loading event details..."})]}):!u.id&&w?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-6",children:[(0,s.jsx)(l.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,s.jsx)("p",{className:"text-xl text-red-400",children:"Error loading event"}),(0,s.jsx)("p",{className:"text-gray-400 mt-1",children:w}),(0,s.jsxs)("button",{onClick:()=>e.back(),className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-neon-green hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neon-green focus:ring-offset-gray-900",children:[(0,s.jsx)(o.Z,{size:18,className:"mr-2"}),"Go Back"]})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-gray-800 shadow-xl rounded-lg p-6 md:p-8",children:[(0,s.jsxs)("button",{onClick:()=>e.back(),className:"mb-6 inline-flex items-center text-neon-green hover:text-opacity-80 transition-colors",children:[(0,s.jsx)(o.Z,{size:20,className:"mr-2"}),"Back"]}),(0,s.jsxs)("h1",{className:"text-3xl md:text-4xl font-heading text-neon-green mb-6",children:["Edit Event: ",(0,s.jsx)("span",{className:"text-white",children:u.title||"Loading..."})]}),w&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-red-700 bg-opacity-50 text-red-300 border border-red-500 rounded-md flex items-center",children:[(0,s.jsx)(l.Z,{size:20,className:"mr-2 flex-shrink-0"}),(0,s.jsx)("span",{children:w})]}),v&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-green-700 bg-opacity-50 text-green-300 border border-green-500 rounded-md flex items-center",children:(0,s.jsx)("span",{children:v})}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-300 mb-1",children:["Title ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"title",id:"title",value:u.title,onChange:Z,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-300 mb-1",children:["Date ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("input",{type:"date",name:"date",id:"date",value:u.date,onChange:Z,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white",style:{colorScheme:"dark"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-300 mb-1",children:"Time (HH:MM)"}),(0,s.jsx)("input",{type:"time",name:"time",id:"time",value:u.time,onChange:Z,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white",style:{colorScheme:"dark"}})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-300 mb-1",children:["Image URL ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("input",{type:"url",name:"imageUrl",id:"imageUrl",value:u.imageUrl,onChange:Z,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"djs",className:"block text-sm font-medium text-gray-300 mb-1",children:"DJs (comma-separated)"}),(0,s.jsx)("input",{type:"text",name:"djs",id:"djs",value:u.djs.join(", "),onChange:e=>A(e,"djs"),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"specials",className:"block text-sm font-medium text-gray-300 mb-1",children:"Specials (comma-separated)"}),(0,s.jsx)("input",{type:"text",name:"specials",id:"specials",value:u.specials.join(", "),onChange:e=>A(e,"specials"),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"instagram",className:"block text-sm font-medium text-gray-300 mb-1",children:"Instagram Handle (e.g., @username)"}),(0,s.jsx)("input",{type:"text",name:"instagram",id:"instagram",value:u.instagram,onChange:Z,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300 mb-1",children:"Website URL"}),(0,s.jsx)("input",{type:"url",name:"website",id:"website",value:u.website,onChange:Z,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-300 mb-1",children:"Address"}),(0,s.jsx)("textarea",{name:"address",id:"address",rows:3,value:u.address,onChange:Z,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:ring-neon-green focus:border-neon-green text-white placeholder-gray-500"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4 pt-4",children:[(0,s.jsxs)("button",{type:"submit",disabled:f||b,className:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-black bg-neon-green hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neon-green focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[f?(0,s.jsx)(i.Z,{size:20,className:"animate-spin mr-2"}):(0,s.jsx)(d,{size:20,className:"mr-2"}),"Save Changes"]}),(0,s.jsxs)("button",{type:"button",onClick:S,disabled:f||b||!u.id,className:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border border-red-600 text-base font-medium rounded-md shadow-sm text-red-400 hover:bg-red-700 hover:text-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[b?(0,s.jsx)(i.Z,{size:20,className:"animate-spin mr-2"}):(0,s.jsx)(c.Z,{size:20,className:"mr-2"}),"Delete Event"]})]})]})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7114)}),_N_E=e.O()}]);