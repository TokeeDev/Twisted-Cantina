(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{257:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u=[],c=!1,l=-1;function d(){c&&r&&(c=!1,r.length?u=r.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=o(d);c=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete n[e]}return a.exports}r.ab="//";var s=r(229);e.exports=s}()},3482:function(e,t,n){"use strict";let r;n.d(t,{U:function(){return n3},g:function(){return n0}});var s=n(7437),a=n(2265);let i=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,s){return arguments.length>=4?t(e,n,r,s):function(s){return t(s,e,n,r)}};case 5:return function(e,n,r,s,a){return arguments.length>=5?t(e,n,r,s,a):function(a){return t(a,e,n,r,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let n=arguments;return function(e){return t(e,...n)}}}},o=e=>e,u=(r=void 0,()=>r),c=Symbol.for("effect/GlobalValue/globalStoreId/3.12.0");c in globalThis||(globalThis[c]=new Map);let l=globalThis[c],d=(e,t)=>(l.has(e)||l.set(e,t()),l.get(e)),f=e=>"string"==typeof e,p=e=>"number"==typeof e,h=e=>"function"==typeof e,g=e=>"object"==typeof e&&null!==e,x=e=>g(e)||h(e),m=i(2,(e,t)=>x(e)&&t in e),v=i(2,(e,t)=>m(e,"_tag")&&e._tag===t),b=e=>g(e)&&!Array.isArray(e),y=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;class w{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new w(this.self)}}let _=Symbol.for("effect/Utils/YieldWrap");class j{#e;constructor(e){this.#e=e}[_](){return this.#e}}let E=d("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),S=d(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),k=Symbol.for("effect/Hash"),O=e=>{if(!0===E.enabled)return 0;switch(typeof e){case"number":return A(e);case"bigint":return C(e.toString(10));case"boolean":case"symbol":return C(String(e));case"string":return C(e);case"undefined":return C("undefined");case"function":case"object":if(null===e)return C("null");if(e instanceof Date)return O(e.toISOString());if(U(e))return e[k]();return T(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},T=e=>(S.has(e)||S.set(e,A(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),S.get(e)),R=e=>t=>53*t^e,N=e=>3221225471&e|e>>>1&1073741824,U=e=>m(e,k),A=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return N(t)},C=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return N(t)},I=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=function(e,t,n,r,s,a,i,o,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return a(s(r(n(t(e)))));case 7:return i(a(s(r(n(t(e))))));case 8:return o(i(a(s(r(n(t(e)))))));case 9:return u(o(i(a(s(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}(C(t[r]),R(O(e[t[r]])));return N(n)},M=e=>I(e,Object.keys(e)),L=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,k,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,k,{value:()=>t,enumerable:!1}),t},F=Symbol.for("effect/Equal");function $(){return 1==arguments.length?e=>P(e,arguments[0]):P(arguments[0],arguments[1])}function P(e,t){if(e===t)return!0;let n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(z(e)&&z(t))return!!(O(e)===O(t)&&e[F](t))||!!E.enabled&&!!E.tester&&E.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(E.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>P(e,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(let r of n)if(!(r in t&&P(e[r],t[r])))return!!E.tester&&E.tester(e,t);return!0}}return!!E.tester&&E.tester(e,t)}}return!!E.enabled&&!!E.tester&&E.tester(e,t)}let z=e=>m(e,F),D=Symbol.for("nodejs.util.inspect.custom"),J=e=>{try{if(m(e,"toJSON")&&h(e.toJSON)&&0===e.toJSON.length)return e.toJSON();if(Array.isArray(e))return e.map(J)}catch(e){return{}}return Y(e)},B=e=>JSON.stringify(e,null,2),V=(e,t=2)=>{if("string"==typeof e)return e;try{return"object"==typeof e?q(e,t):String(e)}catch(t){return String(e)}},q=(e,t)=>{let n=[],r=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&(void 0!==W.fiberRefs&&H(t)?t[G](W.fiberRefs):t):t,t);return n=void 0,r},G=Symbol.for("effect/Inspectable/Redactable"),H=e=>"object"==typeof e&&null!==e&&G in e,W=d("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),Y=e=>H(e)&&void 0!==W.fiberRefs?e[G](W.fiberRefs):e,X=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}},K=Symbol.for("effect/Effect"),Q=Symbol.for("effect/Stream"),Z=Symbol.for("effect/Sink"),ee=Symbol.for("effect/Channel"),et={_R:e=>e,_E:e=>e,_A:e=>e,_V:"3.12.0"},en={[K]:et,[Q]:et,[Z]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[ee]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[F](e){return this===e},[k](){return L(this,T(this))},[Symbol.iterator](){return new w(new j(this))},pipe(){return X(this,arguments)}},er={[k](){return L(this,M(this))},[F](e){let t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(let n of t)if(!(n in e&&$(this[n],e[n])))return!1;return!0}},es=Symbol.for("effect/Option"),ea={...en,[es]:{_A:e=>e},[D](){return this.toJSON()},toString(){return B(this.toJSON())}},ei=O("None"),eo=Object.assign(Object.create(ea),{_tag:"None",_op:"None",[F]:e=>eu(e)&&ec(e),[k]:()=>ei,toJSON(){return{_id:"Option",_tag:this._tag}}}),eu=e=>m(e,es),ec=e=>"None"===e._tag,el=e=>"Some"===e._tag,ed=Symbol.for("effect/Either"),ef=(e=>e,e=>Array.isArray(e)?e:Array.from(e)),ep=e=>Array.isArray(e)?e:[e],eh=Symbol.for("effect/Context/Tag"),eg=Symbol.for("effect/Context/Reference"),ex=Symbol.for("effect/STM"),em={...en,_op:"Tag",[ex]:et,[eh]:{_Service:e=>e,_Identifier:e=>e},toString(){return B(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[D](){return this.toJSON()},of:e=>e,context(e){return eE(this,e)}},ev={...em,[eg]:eg},eb=Symbol.for("effect/Context"),ey={[eb]:{_Services:e=>e},[F](e){if(ej(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!$(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[k](){return L(this,A(this.unsafeMap.size))},pipe(){return X(this,arguments)},toString(){return B(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(J)}},[D](){return this.toJSON()}},ew=e=>{let t=Object.create(ey);return t.unsafeMap=e,t},e_=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let n=e.stack.split("\n");if(n.length>2){let e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},ej=e=>m(e,eb),eE=(e,t)=>ew(new Map([[e.key,t]])),eS=i(3,(e,t,n)=>{let r=new Map(e.unsafeMap);return r.set(t.key,n),ew(r)}),ek=d("effect/Context/defaultValueCache",()=>new Map),eO=e=>{if(ek.has(e.key))return ek.get(e.key);let t=e.defaultValue();return ek.set(e.key,t),t},eT=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):eO(t),eR=i(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(eg in t)return eO(t);throw e_(t)}return e.unsafeMap.get(t.key)}),eN=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();function r(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(r,em),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},eU=()=>(e,t)=>{let n=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=Error();function s(){}return Error.stackTraceLimit=n,Object.setPrototypeOf(s,ev),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get:()=>r.stack}),s},eA=Symbol.for("effect/Micro"),eC=Symbol.for("effect/Micro/MicroExit"),eI=e=>"object"==typeof e&&null!==e&&eA in e,eM=Symbol.for("effect/Micro/MicroCause"),eL={_E:o};class eF extends globalThis.Error{_tag;traces;[eM];constructor(e,t,n){let r,s,a;let i=`MicroCause.${e}`;if(t instanceof globalThis.Error){r=`(${i}) ${t.name}`;let e=(s=t.message).split("\n").length;a=t.stack?`(${i}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${r}: ${s}`}else r=i,s=V(t,0),a=`${r}: ${s}`;n.length>0&&(a+=`
    ${n.join("\n    ")}`),super(s),this._tag=e,this.traces=n,this[eM]=eL,this.name=r,this.stack=a}pipe(){return X(this,arguments)}toString(){return this.stack}[D](){return this.stack}}class e$ extends eF{error;constructor(e,t=[]){super("Fail",e,t),this.error=e}}let eP=(e,t=[])=>new e$(e,t);class ez extends eF{defect;constructor(e,t=[]){super("Die",e,t),this.defect=e}}let eD=(e,t=[])=>new ez(e,t);class eJ extends eF{constructor(e=[]){super("Interrupt","interrupted",e)}}let eB=(e=[])=>new eJ(e),eV=e=>"Fail"===e._tag,eq=e=>"Interrupt"===e._tag,eG=e=>"Fail"===e._tag?e.error:"Die"===e._tag?e.defect:e,eH=i(2,(e,t)=>{let n=[...e.traces,t];switch(e._tag){case"Die":return eD(e.defect,n);case"Interrupt":return eB(n);case"Fail":return eP(e.error,n)}}),eW=Symbol.for("effect/Micro/MicroFiber"),eY={_A:o,_E:o};class eX{context;interruptible;[eW];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,t=!0){this.context=e,this.interruptible=t,this[eW]=eY}getRef(e){return eT(this.context,e)}addObserver(e){return this._exit?(e(this._exit),u):(this._observers.push(e),()=>{let t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)})}_interrupted=!1;unsafeInterrupt(){!this._exit&&(this._interrupted=!0,this.interruptible&&this.evaluate(tT))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(void 0!==this._yielded){let e=this._yielded;this._yielded=void 0,e()}let t=this.runLoop(e);if(t===e5)return;let n=eK.interruptChildren&&eK.interruptChildren(this);if(void 0!==n)return this.evaluate(t_(n,()=>t));this._exit=t;for(let e=0;e<this._observers.length;e++)this._observers[e](t);this._observers.length=0}runLoop(e){let t=!1,n=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!t&&this.getRef(tz).shouldYield(this)){t=!0;let e=n;n=t_(ti,()=>e)}if((n=n[e1](this))===e5){let e=this._yielded;if(eC in e)return this._yielded=void 0,e;return e5}}}catch(e){if(!m(n,e1))return tR(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`);return tR(e)}}getCont(e){for(;;){let t=this._stack.pop();if(!t)return;let n=t[e3]&&t[e3](this);if(n)return{[e]:n};if(t[e])return t}}_yielded=void 0;yieldWith(e){return this._yielded=e,e5}children(){return this._children??=new Set}}let eK=d("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),eQ=e=>ta(()=>{for(let t of e)t.unsafeInterrupt();let t=e[Symbol.iterator](),n=ta(()=>{let e=t.next();for(;!e.done;){if(e.value.unsafePoll()){e=t.next();continue}let r=e.value;return tg(e=>{r.addObserver(t=>{e(n)})})}return tU});return n}),eZ=Symbol.for("effect/Micro/identifier"),e0=Symbol.for("effect/Micro/args"),e1=Symbol.for("effect/Micro/evaluate"),e2=Symbol.for("effect/Micro/successCont"),e4=Symbol.for("effect/Micro/failureCont"),e3=Symbol.for("effect/Micro/ensureCont"),e5=Symbol.for("effect/Micro/Yield"),e6={...en,_op:"Micro",[eA]:{_A:o,_E:o,_R:o},pipe(){return X(this,arguments)},[Symbol.iterator](){return new w(new j(this))},toJSON(){return{_id:"Micro",op:this[eZ],...e0 in this?{args:this[e0]}:void 0}},toString(){return B(this)},[D](){return B(this)}};function e7(e){return tR("Micro.evaluate: Not implemented")}let e9=e=>({...e6,[eZ]:e.op,[e1]:e.eval??e7,[e2]:e.contA,[e4]:e.contE,[e3]:e.ensure}),e8=e=>{let t=e9(e);return function(){let n=Object.create(t);return n[e0]=!1===e.single?arguments:arguments[0],n}},te=e=>{let t={...e9(e),[eC]:eC,_tag:e.op,get[e.prop](){return this[e0]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[e0]}},[F](t){return tS(t)&&t._tag===e.op&&$(this[e0],t[e0])},[k](){return L(this,R(C(e.op))(O(this[e0])))}};return function(e){let n=Object.create(t);return n[e0]=e,n[e2]=void 0,n[e4]=void 0,n[e3]=void 0,n}},tt=te({op:"Success",prop:"value",eval(e){let t=e.getCont(e2);return t?t[e2](this[e0],e):e.yieldWith(this)}}),tn=te({op:"Failure",prop:"cause",eval(e){let t=e.getCont(e4);for(;eq(this[e0])&&t&&e.interruptible;)t=e.getCont(e4);return t?t[e4](this[e0],e):e.yieldWith(this)}}),tr=e=>tn(eP(e)),ts=e8({op:"Sync",eval(e){let t=this[e0](),n=e.getCont(e2);return n?n[e2](t,e):e.yieldWith(tk(t))}}),ta=e8({op:"Suspend",eval(e){return this[e0]()}}),ti=e8({op:"Yield",eval(e){let t=!1;return e.getRef(tz).scheduleTask(()=>{t||e.evaluate(tU)},this[e0]??0),e.yieldWith(()=>{t=!0})}})(0),to=e=>tR(e),tu=tt(void 0),tc=e=>ta(()=>{try{return tt(e.try())}catch(t){return tr(e.catch(t))}}),tl=e=>tp(function(t,n){e(n).then(e=>t(tt(e)),e=>t(to(e)))},0!==e.length),td=e=>tp(function(t,n){try{e.try(n).then(e=>t(tt(e)),n=>t(tr(e.catch(n))))}catch(n){t(tr(e.catch(n)))}},0!==e.try.length),tf=e8({op:"WithMicroFiber",eval(e){return this[e0](e)}}),tp=e8({op:"Async",single:!1,eval(e){let t=this[e0][0],n=!1,r=!1,s=this[e0][1]?new AbortController:void 0,a=t(t=>{n||(n=!0,r?e.evaluate(t):r=t)},s?.signal);return!1!==r?r:(r=!0,e._yielded=()=>{n=!0},void 0===s&&void 0===a||e._stack.push(th(()=>(n=!0,s?.abort(),a??tU))),e5)}}),th=e8({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(t3(!0)))},contE(e,t){return eq(e)?t_(this[e0](),()=>tn(e)):tn(e)}}),tg=e=>tp(e,e.length>=2),tx=(...e)=>ta(()=>tm(1===e.length?e[0]():e[1].call(e[0]))),tm=e8({op:"Iterator",contA(e,t){let n=this[e0].next(e);return n.done?tt(n.value):(t._stack.push(this),function(e){if("object"==typeof e&&null!==e&&_ in e)return e[_]();throw Error(y("yieldWrapGet"))}(n.value))},eval(e){return this[e2](void 0,e)}}),tv=i(2,(e,t)=>tE(e,e=>t)),tb=i(2,(e,t)=>t_(e,e=>{let n=eI(t)?t:"function"==typeof t?t(e):t;return eI(n)?n:tt(n)})),ty=i(2,(e,t)=>t_(e,e=>{let n=eI(t)?t:"function"==typeof t?t(e):t;return eI(n)?tv(n,e):tt(e)})),tw=e=>tQ(e,{onFailure:tO,onSuccess:tk}),t_=i(2,(e,t)=>{let n=Object.create(tj);return n[e0]=e,n[e2]=t,n}),tj=e9({op:"OnSuccess",eval(e){return e._stack.push(this),this[e0]}}),tE=i(2,(e,t)=>t_(e,e=>tt(t(e)))),tS=e=>m(e,eC),tk=tt,tO=tn,tT=tO(eB()),tR=e=>tO(eD(e)),tN=e=>"Failure"===e._tag,tU=tk(void 0),tA=e=>{for(let t of e)if("Failure"===t._tag)return t;return tU},tC="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class tI{tasks=[];running=!1;scheduleTask(e,t){this.tasks.push(e),this.running||(this.running=!0,tC(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let e=this.tasks;this.tasks=[];for(let t=0,n=e.length;t<n;t++)e[t]()}shouldYield(e){return e.currentOpCount>=e.getRef(t$)}flush(){for(;this.tasks.length>0;)this.runTasks()}}let tM=e=>tf(t=>tt(eR(t.context,e))),tL=i(2,(e,t)=>tf(n=>{let r=n.context;return n.context=t(r),t1(e,()=>(n.context=r,tu))})),tF=i(3,(e,t,n)=>tL(e,eS(t,n)));class t$ extends eU()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class tP extends eU()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){}class tz extends eU()("effect/Micro/currentScheduler",{defaultValue:()=>new tI}){}let tD=i(e=>eI(e[0]),(e,t,n)=>t_(e,e=>t(e)?tt(e):tr(n(e)))),tJ=i(2,(e,t)=>{let n=Object.create(tB);return n[e0]=e,n[e4]=t,n}),tB=e9({op:"OnFailure",eval(e){return e._stack.push(this),this[e0]}}),tV=i(3,(e,t,n)=>tJ(e,e=>t(e)?n(e):tn(e))),tq=i(3,(e,t,n)=>tV(e,t,e=>tb(n(e),tn(e)))),tG=i(2,(e,t)=>tq(e,eV,e=>t(e.error))),tH=i(3,(e,t,n)=>tV(e,e=>eV(e)&&t(e.error),e=>n(e.error))),tW=i(3,(e,t,n)=>tH(e,v(t),n)),tY=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let n=e=>n=>t4(n,n=>tn(function(e,n){let r=t.stack;if(!r)return n;let s=r.split("\n")[2]?.trim().replace(/^at /,"");if(!s)return n;let a=s.match(/\((.*)\)$/);return eH(n,`at ${e} (${a?a[1]:s})`)}(e,n)));return 2==arguments.length?n(arguments[1])(arguments[0]):n(arguments[0])},tX=i(2,(e,t)=>{let n=Object.create(tK);return n[e0]=e,n[e2]=t.onSuccess,n[e4]=t.onFailure,n}),tK=e9({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[e0]}}),tQ=null,tZ=Symbol.for("effect/Micro/MicroScope");class t0{[tZ];state={_tag:"Open",finalizers:new Set};constructor(){this[tZ]=tZ}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return ta(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),tu):e(this.state.exit))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return ta(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},t_(t9(t,t=>tw(t(e))),tA)}return tu})}get fork(){return ts(()=>{let e=new t0;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>ts(()=>this.unsafeRemoveFinalizer(t))),e})}}let t1=i(2,(e,t)=>t6(n=>tX(n(e),{onFailure:e=>t_(t(tO(e)),()=>tn(e)),onSuccess:e=>t_(t(tk(e)),()=>tt(e))}))),t2=i(3,(e,t,n)=>t1(e,e=>t(e)?n(e):tU)),t4=i(2,(e,t)=>t2(e,tN,e=>t(e.cause))),t3=e8({op:"SetInterruptible",ensure(e){if(e.interruptible=this[e0],e._interrupted&&e.interruptible)return()=>tT}}),t5=e=>tf(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(t3(!1)),t._interrupted)?tT:e),t6=e=>tf(t=>t.interruptible?(t.interruptible=!1,t._stack.push(t3(!0)),e(t5)):e(o)),t7=e8({op:"While",contA(e,t){return(this[e0].step(e),this[e0].while())?(t._stack.push(this),this[e0].body()):tU},eval(e){return this[e0].while()?(e._stack.push(this),this[e0].body()):tU}}),t9=(e,t,n)=>tf(r=>{let s=n?.concurrency==="inherit"?r.getRef(tP):n?.concurrency??1,a="unbounded"===s?Number.POSITIVE_INFINITY:Math.max(1,s),i=ef(e),o=i.length;if(0===o)return n?.discard?tu:tt([]);let u=n?.discard?void 0:Array(o),c=0;return 1===a?tv(t7({while:()=>c<i.length,body:()=>t(i[c],c),step:u?e=>u[c++]=e:e=>c++}),u):tg(e=>{let n;let s=new Set,l=0,d=0,f=!1,p=!1;return!function h(){for(f=!0;l<a&&c<o;){let g=c,x=i[g];c++,l++;try{let i=t8(r,t(x,g),!0,!0);s.add(i),i.addObserver(t=>{s.delete(i),p||("Failure"===t._tag?void 0===n&&(n=t,o=c,s.forEach(e=>e.unsafeInterrupt())):void 0!==u&&(u[g]=t.value),d++,l--,d===o?e(n??tt(u)):!f&&l<a&&h())})}catch(e){n=tR(e),o=c,s.forEach(e=>e.unsafeInterrupt())}}f=!1}(),ta(()=>(p=!0,c=o,eQ(s)))})}),t8=(e,t,n=!1,r=!1)=>{let s=new eX(e.context,e.interruptible);return r||(e.children().add(s),s.addObserver(()=>e.children().delete(s))),n?s.evaluate(t):e.getRef(tz).scheduleTask(()=>s.evaluate(t),0),s},ne=(e,t)=>{let n=new eX(tz.context(t?.scheduler??new tI));if(n.evaluate(e),t?.signal){if(t.signal.aborted)n.unsafeInterrupt();else{let e=()=>n.unsafeInterrupt();t.signal.addEventListener("abort",e,{once:!0}),n.addObserver(()=>t.signal.removeEventListener("abort",e))}}return n},nt=(e,t)=>new Promise((n,r)=>{ne(e,t).addObserver(n)}),nn=(e,t)=>nt(e,t).then(e=>{if("Failure"===e._tag)throw e.cause;return e.value}),nr=e=>{let t=new tI,n=ne(e,{scheduler:t});return t.flush(),n._exit??tR(n)},ns=e=>{let t=nr(e);if("Failure"===t._tag)throw t.cause;return t.value},na=function(){class e extends globalThis.Error{}return Object.assign(e.prototype,e6,er,{[eZ]:"Failure",[e1](){return tr(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[D](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}),e}(),ni=class extends na{constructor(e){super(),e&&Object.assign(this,e)}},no=e=>{class t extends ni{_tag=e}return t.prototype.name=e,t},nu={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}},nc={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}},nl={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}},nd={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};var nf=n(257);class np extends no("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class nh extends no("FetchError"){}class ng extends no("InvalidJson"){}class nx extends no("BadRequestError"){getMessage(){return b(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}class nm extends no("UploadAborted"){}class nv extends no("UploadAborted"){}async function nb(e){let t=await e.text();try{return JSON.parse(t)}catch(e){return console.error(`Error parsing JSON, got '${t}'`,e),Error(`Error parsing JSON, got '${t}'`)}}function ny(e){return Object.keys(e)}let nw=e=>tx(function*(){let t="undefined"!=typeof window?window.location.origin:nf.env.VERCEL_URL?`https://${nf.env.VERCEL_URL}`:"http://localhost:3000",n=yield*tc({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new np(e??"/api/uploadthing")});return"/"===n.pathname&&(n.pathname="/api/uploadthing"),n}),n_=e=>e instanceof URL?e:ns(nw(e));function nj(){}function nE(e,...t){return"function"==typeof e?e(...t):e}let nS={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,INVALID_SERVER_CONFIG:500,FILE_LIMIT_EXCEEDED:500};class nk extends ni{constructor(e){var t,n;let r="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:r.message??(t=r.cause,n=r.code,"string"==typeof t?t:t instanceof Error||t&&"object"==typeof t&&"message"in t&&"string"==typeof t.message?t.message:n??"An unknown error occurred")}),this._tag="UploadThingError",this.name="UploadThingError",this.code=r.code,this.data=r.data,r.cause instanceof Error?this.cause=r.cause:b(r.cause)&&p(r.cause.status)&&f(r.cause.statusText)?this.cause=Error(`Response ${r.cause.status} ${r.cause.statusText}`):f(r.cause)?this.cause=Error(r.cause):this.cause=r.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(nk.toObject(e))}}let nO=e=>new nk({code:"INTERNAL_CLIENT_ERROR",message:"Something went wrong. Please report this to UploadThing.",cause:e});class nT extends eN("uploadthing/Fetch")(){}let nR=(e,t)=>t_(tM(nT),n=>{let r=new Headers(t?.headers??[]),s={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(r)};return td({try:s=>n(e,{...t,headers:r,signal:s}),catch:e=>new nh({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:s})}).pipe(tG(e=>ts(()=>console.error(e.input))),tE(e=>Object.assign(e,{requestUrl:s.url})),tY("fetch"))}),nN=e=>td({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new ng({error:t,input:e.requestUrl})}).pipe(tD(({ok:e})=>e,({json:t,status:n})=>new nx({status:n,message:`Request to ${e.requestUrl} failed with status ${n}`,json:t})),tE(({json:e})=>e),tY("parseJson")),nU=(e,t)=>"all"===t?e:"fine"===t?Math.round(e):10*Math.floor(e/10),nA=e=>{let t=Array.isArray(e)?e:ny(e);return t.includes("blob")?[]:t.map(e=>"pdf"===e?"application/pdf":e.includes("/")?e:"audio"===e?["audio/*",...ny(nu)].join(", "):"image"===e?["image/*",...ny(nc)].join(", "):"text"===e?["text/*",...ny(nl)].join(", "):"video"===e?["video/*",...ny(nd)].join(", "):`${e}/*`)},nC=e=>({fileTypes:e?ny(e):[],multiple:(e?Object.values(e).map(e=>e.maxFileCount):[]).some(e=>e&&e>1)}),nI=e=>e.charAt(0).toUpperCase()+e.slice(1),nM=e=>{if(!e)return"";let t=ny(e),n=t.map(e=>"blob"===e?"file":e);if(n.length>1){let e=n.pop();return`${n.join("s, ")} and ${e}s`}let r=t[0],s=n[0];if(!r||!s)return"";let{maxFileSize:a,maxFileCount:i,minFileCount:o}=e[r];return i&&i>1?o>1?`${o} - ${i} ${s}s up to ${a}`:`${s}s up to ${a}, max ${i}`:`${s} (${a})`},nL=e=>nI(nM(e)),nF=(e,t)=>{if("string"==typeof e)return e;if("function"==typeof e){let n=e(t);if("string"==typeof n)return n}return""},n$=(e,t)=>{if("object"==typeof e)return e;if("function"==typeof e){let n=e(t);if("object"==typeof n)return n}return{}},nP=(e,t)=>e?"function"!=typeof e?e:"function"==typeof e?e(t):void 0:null,nz=(...e)=>e.filter(Boolean).join(" ");new TextEncoder;let nD=()=>{let e,t;let n=new AbortController;return{promise:new Promise((n,r)=>{e=n,t=r}),ac:n,resolve:e,reject:t}},nJ=e=>{console.warn(`⚠️ [uploadthing][deprecated] ${e}`)},nB=e=>{let t=new URL(e.url),n=new URLSearchParams(t.search);return n.set("actionType",e.actionType),n.set("slug",e.slug),t.search=n.toString(),t},nV=e=>(t,n)=>tx(function*(){let r=nB({url:e.url,slug:e.endpoint,actionType:t}),s=new Headers((yield*tl(async()=>"function"==typeof e.headers?await e.headers():e.headers)));return s.set("x-uploadthing-package",e.package),s.set("x-uploadthing-version","7.6.0"),s.set("Content-Type","application/json"),yield*nR(r,{method:"POST",body:JSON.stringify(n),headers:s}).pipe(tb(nN),tE(o),tW("FetchError",e=>tr(new nk({code:"INTERNAL_CLIENT_ERROR",message:`Failed to report event "${t}" to UploadThing server`,cause:e}))),tW("BadRequestError",e=>tr(new nk({code:function(e){for(let[t,n]of Object.entries(nS))if(n===e)return t;return"INTERNAL_SERVER_ERROR"}(e.status),message:e.getMessage(),cause:e.json}))),tW("InvalidJson",e=>tr(new nk({code:"INTERNAL_CLIENT_ERROR",message:"Failed to parse response from UploadThing server",cause:e}))))}),nq=(e,t,n,r)=>tg(s=>{let a=new XMLHttpRequest;a.open("PUT",n.url,!0),a.setRequestHeader("Range",`bytes=${t}-`),a.setRequestHeader("x-uploadthing-version","7.6.0"),a.responseType="json";let i=0;a.upload.addEventListener("progress",({loaded:e})=>{let t=e-i;r?.({loaded:e,delta:t}),i=e}),a.addEventListener("load",()=>{a.status>=200&&a.status<300&&b(a.response)?m(a.response,"error")?s(new nk({code:"UPLOAD_FAILED",message:String(a.response.error),data:a.response})):s(tt(a.response)):s(new nk({code:"UPLOAD_FAILED",message:`XHR failed ${a.status} ${a.statusText}`,data:a.response}))}),a.addEventListener("error",()=>{s(new nk({code:"UPLOAD_FAILED"}))});let o=new FormData;return"uri"in e?o.append("file",{uri:e.uri,type:e.type,name:e.name,...t>0&&{range:t}}):o.append("file",t>0?e.slice(t):e),a.send(o),ts(()=>a.abort())}),nG=(e,t,n)=>nR(t.url,{method:"HEAD"}).pipe(tE(({headers:e})=>parseInt(e.get("x-ut-range-start")??"0",10)),ty(e=>n.onUploadProgress?.({delta:e,loaded:e})),t_(r=>nq(e,r,t,e=>n.onUploadProgress?.({delta:e.delta,loaded:e.loaded+r}))),tE(o),tE(n=>({name:e.name,size:e.size,key:t.key,lastModified:e.lastModified,serverData:n.serverData,get url(){return nJ("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),n.url},get appUrl(){return nJ("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),n.appUrl},ufsUrl:n.ufsUrl,customId:t.customId,type:e.type,fileHash:n.fileHash}))),nH=(e,t)=>{let n=nV({endpoint:String(e),package:t.package,url:t.url,headers:t.headers}),r=t.files.reduce((e,t)=>e+t.size,0),s=0;return t_(n("upload",{input:"input"in t?t.input:null,files:t.files.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))}),e=>t9(e,(e,n)=>t_(ts(()=>t.onUploadBegin?.({file:t.files[n].name})),()=>nG(t.files[n],e,{onUploadProgress:e=>{s+=e.delta,t.onUploadProgress?.({file:t.files[n],progress:e.loaded/t.files[n].size*100,loaded:e.loaded,delta:e.delta,totalLoaded:s,totalProgress:s/r})}})),{concurrency:6}))},nW=e=>{let t=new Proxy(nj,{get:(e,t)=>t});return{uploadFiles:(n,r)=>{let s="function"==typeof n?n(t):n,a=e?.fetch??window.fetch;return nH(s,{...r,skipPolling:{},url:n_(e?.url),package:e?.package??"uploadthing/client",input:r.input}).pipe(tF(nT,a),e=>nt(e,r.signal&&{signal:r.signal})).then(e=>{if("Success"===e._tag)return e.value;if("Interrupt"===e.cause._tag)throw new nv;throw eG(e.cause)})},createUpload:async(n,r)=>{let s=new Map,a=nV({endpoint:String("function"==typeof n?n(t):n),package:e?.package??"uploadthing/client",url:n_(e?.url),headers:r.headers}),i=e?.fetch??window.fetch,o=await nn(a("upload",{input:"input"in r?r.input:null,files:r.files.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))}).pipe(tF(nT,i))),u=r.files.reduce((e,t)=>e+t.size,0),c=0,l=(e,t)=>nG(e,t,{onUploadProgress:t=>{c+=t.delta,r.onUploadProgress?.({...t,file:e,progress:Math.round(t.loaded/e.size*100),totalLoaded:c,totalProgress:Math.round(c/u*100)})}}).pipe(tF(nT,i));for(let[e,t]of o.entries()){let n=r.files[e];if(!n)continue;let a=nD();s.set(n,{deferred:a,presigned:t}),nt(l(n,t),{signal:a.ac.signal}).then(e=>{if("Success"===e._tag)return a.resolve(e.value);if("Interrupt"===e.cause._tag)throw new nm;throw eG(e.cause)}).catch(e=>{e instanceof nm||a.reject(e)})}return{pauseUpload:e=>{for(let t of ep(e??r.files)){let e=s.get(t);if(!e)return;if(e.deferred.ac.signal.aborted)throw new nv;e.deferred.ac.abort()}},resumeUpload:e=>{for(let t of ep(e??r.files)){let e=s.get(t);if(!e)throw"No upload found";e.deferred.ac=new AbortController,nt(l(t,e.presigned),{signal:e.deferred.ac.signal}).then(t=>{if("Success"===t._tag)return e.deferred.resolve(t.value);if("Interrupt"===t.cause._tag)throw new nm;throw eG(t.cause)}).catch(t=>{t instanceof nm||e.deferred.reject(t)})}},done:async e=>{let t=[];for(let n of ep(e??r.files)){let e=s.get(n);if(!e)throw"No upload found";t.push(e.deferred.promise)}let n=await Promise.all(t);return e?n[0]:n}}},routeRegistry:t}},nY="undefined"!=typeof window?a.useInsertionEffect:()=>void 0;function nX(e){let t=a.useRef(nK);nY(()=>{t.current=e},[e]);let n=a.useRef();return n.current||(n.current=function(){return t.current.apply(this,arguments)}),n.current}function nK(){throw Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}let nQ=(e,t,n)=>{var r,s;let i=globalThis.__UPLOADTHING,{data:o}=function(e,t,n){let r=(0,a.useRef)({}),s=(0,a.useRef)(!1),i={error:void 0,data:void 0},[o,u]=(0,a.useReducer)((e,t)=>{switch(t.type){case"loading":return{...i};case"fetched":return{...i,data:t.payload};case"error":return{...i,error:t.payload};default:return e}},i);return(0,a.useEffect)(()=>{if(t)return s.current=!1,(async()=>{if(u({type:"loading"}),r.current[t]){u({type:"fetched",payload:r.current[t]});return}try{let n=await e(t,void 0);if(!n.ok)throw Error(n.statusText);let a=await nb(n);if(a instanceof Error)throw a;if(r.current[t]=a,s.current)return;u({type:"fetched",payload:a})}catch(e){if(s.current)return;u({type:"error",payload:e})}})(),()=>{s.current=!0}},[t]),o}(e,i?void 0:t.href);return null===(s=null!=i?i:o)||void 0===s?void 0:null===(r=s.find(e=>e.slug===n))||void 0===r?void 0:r.config},nZ=function(e,t,n,r){var s;let i=null!==(s=null==r?void 0:r.uploadProgressGranularity)&&void 0!==s?s:"coarse",{uploadFiles:o,routeRegistry:u}=nW({fetch:n,url:e,package:"@uploadthing/react"}),[c,l]=(0,a.useState)(!1),d=(0,a.useRef)(0),f=(0,a.useRef)(new Map);return{startUpload:nX(async function(){for(var e,n,s,a,u,c=arguments.length,p=Array(c),h=0;h<c;h++)p[h]=arguments[h];let g=null!==(s=await (null==r?void 0:null===(e=r.onBeforeUploadBegin)||void 0===e?void 0:e.call(r,p[0])))&&void 0!==s?s:p[0],x=p[1];l(!0),g.forEach(e=>f.current.set(e,0)),null==r||null===(n=r.onUploadProgress)||void 0===n||n.call(r,0);try{let e=await o(t,{signal:null==r?void 0:r.signal,headers:null==r?void 0:r.headers,files:g,onUploadProgress:e=>{if(!(null==r?void 0:r.onUploadProgress))return;f.current.set(e.file,e.progress);let t=0;f.current.forEach(e=>{t+=e});let n=nU(Math.min(100,t/f.current.size),i);n!==d.current&&(r.onUploadProgress(n),d.current=n)},onUploadBegin(e){let{file:t}=e;(null==r?void 0:r.onUploadBegin)&&r.onUploadBegin(t)},input:x});return await (null==r?void 0:null===(a=r.onClientUploadComplete)||void 0===a?void 0:a.call(r,e)),e}catch(t){let e;if(t instanceof nv)throw t;t instanceof nk?e=t:console.error("Something went wrong. Please contact UploadThing and provide the following cause:",(e=nO(t)).cause instanceof Error?e.cause.toString():e.cause),await (null==r?void 0:null===(u=r.onUploadError)||void 0===u?void 0:u.call(r,e))}finally{l(!1),f.current=new Map,d.current=0}}),isUploading:c,routeConfig:nQ(n,e,nE(t,u))}},n0=e=>{var t,n,r;!function(e,t){let n=/(\d+)\.?(\d+)?\.?(\d+)?/,r=n.exec(e);if(!r?.[0])throw Error(`Invalid semver requirement: ${e}`);let s=n.exec(t);if(!s?.[0])throw Error(`Invalid semver to check: ${t}`);let[a,i,o,u]=r,[c,l,d,f]=s;return e.startsWith("^")?i===l&&(!o||!d||!(o>d)):e.startsWith("~")?i===l&&o===d:i===l&&o===d&&u===f}(n="^7.2.0",r="7.6.0")&&console.warn(`!!!WARNING::: @uploadthing/react requires "uploadthing@${n}", but version "${r}" is installed`);let s=null!==(t=null==e?void 0:e.fetch)&&void 0!==t?t:globalThis.fetch,a=n_(null==e?void 0:e.url),i=nW({fetch:s,url:a,package:"@uploadthing/react"});return{useUploadThing:function(e,t){return nZ(a,e,s,t)},...i,getRouteConfig:function(e){var t;let n=globalThis.__UPLOADTHING,r=nE(e,i.routeRegistry),s=null==n?void 0:null===(t=n.find(e=>e.slug===r))||void 0===t?void 0:t.config;if(!s)throw Error('No config found for endpoint "'.concat(r.toString(),'". Please make sure to use the NextSSRPlugin in your Next.js app.'));return s}}},n1=e=>{let t=nX(e);(0,a.useEffect)(()=>{let e=new AbortController;return window.addEventListener("paste",t,{signal:e.signal}),()=>{e.abort()}},[t])};function n2(){return(0,s.jsx)("svg",{className:"z-10 block h-5 w-5 animate-spin align-middle text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 576 512",children:(0,s.jsx)("path",{fill:"currentColor",d:"M256 32C256 14.33 270.3 0 288 0C429.4 0 544 114.6 544 256C544 302.6 531.5 346.4 509.7 384C500.9 399.3 481.3 404.6 465.1 395.7C450.7 386.9 445.5 367.3 454.3 351.1C470.6 323.8 480 291 480 255.1C480 149.1 394 63.1 288 63.1C270.3 63.1 256 49.67 256 31.1V32z"})})}function n4(e){let{className:t,cn:n,...r}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:n("fill-none stroke-current stroke-2",t),...r,children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"m4.9 4.9 14.2 14.2"})]})}function n3(e){var t,n,r,i,o,u,c,l,d,f,p,h,g,x,m,v;let{mode:b="auto",appendOnPaste:y=!1,cn:w=nz}=null!==(o=e.config)&&void 0!==o?o:{},_=(0,a.useRef)(new AbortController),j=(0,a.useRef)(null),[E,S]=(0,a.useState)(null!==(u=e.__internal_upload_progress)&&void 0!==u?u:0),[k,O]=(0,a.useState)([]),{startUpload:T,isUploading:R,routeConfig:N}=nZ(n_(e.url),e.endpoint,null!==(c=e.fetch)&&void 0!==c?c:globalThis.fetch,{signal:_.current.signal,headers:e.headers,onClientUploadComplete:t=>{var n;j.current&&(j.current.value=""),O([]),null===(n=e.onClientUploadComplete)||void 0===n||n.call(e,t),S(0)},uploadProgressGranularity:e.uploadProgressGranularity,onUploadProgress:t=>{var n;S(t),null===(n=e.onUploadProgress)||void 0===n||n.call(e,t)},onUploadError:e.onUploadError,onUploadBegin:e.onUploadBegin,onBeforeUploadBegin:e.onBeforeUploadBegin}),{fileTypes:U,multiple:A}=nC(N),C=!!(null!==(l=e.__internal_button_disabled)&&void 0!==l?l:e.disabled),I=(()=>{let t="ready"===e.__internal_state||U.length>0;return e.__internal_state?e.__internal_state:C?"disabled":t?R?"uploading":"ready":"readying"})(),M=(0,a.useCallback)(t=>{T(t,"input"in e?e.input:void 0).catch(t=>{if(t instanceof nv){var n;null===(n=e.onUploadAborted)||void 0===n||n.call(e)}else throw t})},[e,T]),L=(0,a.useMemo)(()=>({type:"file",ref:j,multiple:A,accept:nA(U).join(", "),onChange:t=>{var n;if(!t.target.files)return;let r=Array.from(t.target.files);if(null===(n=e.onChange)||void 0===n||n.call(e,r),"manual"===b){O(r);return}M(r)},disabled:C,tabIndex:C?-1:0}),[e,C,U,b,A,M]);n1(t=>{if(!y||document.activeElement!==j.current)return;let n=function(e){let t=e.clipboardData?.items;if(t)return Array.from(t).reduce((e,t)=>{let n=t.getAsFile();return n?[...e,n]:e},[])}(t);if(!n)return;let r=n;O(t=>{var s;return r=[...t,...n],null===(s=e.onChange)||void 0===s||s.call(e,r),r}),"auto"===b&&M(k)});let F=(0,a.useMemo)(()=>({ready:"readying"!==I,isUploading:"uploading"===I,uploadProgress:E,fileTypes:U,files:k}),[U,k,I,E]);return(0,s.jsxs)("div",{className:w("flex flex-col items-center justify-center gap-1",e.className,nF(null===(t=e.appearance)||void 0===t?void 0:t.container,F)),style:{"--progress-width":"".concat(E,"%"),...n$(null===(n=e.appearance)||void 0===n?void 0:n.container,F)},"data-state":I,children:[(0,s.jsxs)("label",{className:w("group relative flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled:pointer-events-none","data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed","data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400","after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:content-[''] data-[state=uploading]:after:bg-blue-600",nF(null===(r=e.appearance)||void 0===r?void 0:r.button,F)),style:n$(null===(i=e.appearance)||void 0===i?void 0:i.button,F),"data-state":I,"data-ut-element":"button",onClick:e=>{if("uploading"===I){e.preventDefault(),e.stopPropagation(),_.current.abort(),_.current=new AbortController;return}"manual"===b&&k.length>0&&(e.preventDefault(),e.stopPropagation(),M(k))},children:[(0,s.jsx)("input",{...L,className:"sr-only"}),(()=>{var t;let n=nP(null===(t=e.content)||void 0===t?void 0:t.button,F);if(n)return n;switch(I){case"readying":return"Loading...";case"uploading":if(E>=100)return(0,s.jsx)(n2,{});return(0,s.jsxs)("span",{className:"z-50",children:[(0,s.jsxs)("span",{className:"block group-hover:hidden",children:[Math.round(E),"%"]}),(0,s.jsx)(n4,{cn:w,className:"hidden size-4 group-hover:block"})]});default:if("manual"===b&&k.length>0)return"Upload ".concat(k.length," file").concat(1===k.length?"":"s");return"Choose File".concat(L.multiple?"(s)":"")}})()]}),"manual"===b&&k.length>0?(0,s.jsx)("button",{onClick:()=>{var t;O([]),j.current&&(j.current.value=""),null===(t=e.onChange)||void 0===t||t.call(e,[])},className:w("h-[1.25rem] cursor-pointer rounded border-none bg-transparent text-gray-500 transition-colors hover:bg-slate-200 hover:text-gray-600",nF(null===(d=e.appearance)||void 0===d?void 0:d.clearBtn,F)),style:n$(null===(f=e.appearance)||void 0===f?void 0:f.clearBtn,F),"data-state":I,"data-ut-element":"clear-btn",children:null!==(h=nP(null===(p=e.content)||void 0===p?void 0:p.clearBtn,F))&&void 0!==h?h:"Clear"}):(0,s.jsx)("div",{className:w("h-[1.25rem] text-xs leading-5 text-gray-600",nF(null===(g=e.appearance)||void 0===g?void 0:g.allowedContent,F)),style:n$(null===(x=e.appearance)||void 0===x?void 0:x.allowedContent,F),"data-state":I,"data-ut-element":"allowed-content",children:null!==(v=nP(null===(m=e.content)||void 0===m?void 0:m.allowedContent,F))&&void 0!==v?v:nL(N)})]})}}}]);