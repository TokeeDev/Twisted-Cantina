"use strict";exports.id=187,exports.ids=[187],exports.modules={8187:(e,t,n)=>{let r;n.d(t,{U:()=>n5,g:()=>n1});var s=n(326),a=n(7577);let i=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,s){return arguments.length>=4?t(e,n,r,s):function(s){return t(s,e,n,r)}};case 5:return function(e,n,r,s,a){return arguments.length>=5?t(e,n,r,s,a):function(a){return t(a,e,n,r,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let n=arguments;return function(e){return t(e,...n)}}}},o=e=>e,u=(r=void 0,()=>r),c=Symbol.for("effect/GlobalValue/globalStoreId/3.12.0");c in globalThis||(globalThis[c]=new Map);let l=globalThis[c],d=(e,t)=>(l.has(e)||l.set(e,t()),l.get(e)),p=e=>"string"==typeof e,f=e=>"number"==typeof e,h=e=>"function"==typeof e,g=e=>"object"==typeof e&&null!==e,x=e=>g(e)||h(e),m=i(2,(e,t)=>x(e)&&t in e),v=i(2,(e,t)=>m(e,"_tag")&&e._tag===t),b=e=>g(e)&&!Array.isArray(e),y=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class w{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new w(this.self)}}let _=Symbol.for("effect/Utils/YieldWrap");class j{#e;constructor(e){this.#e=e}[_](){return this.#e}}let S=d("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),E=d(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),k=Symbol.for("effect/Hash"),O=e=>{if(!0===S.enabled)return 0;switch(typeof e){case"number":return M(e);case"bigint":return I(e.toString(10));case"boolean":case"symbol":return I(String(e));case"string":return I(e);case"undefined":return I("undefined");case"function":case"object":if(null===e)return I("null");if(e instanceof Date)return O(e.toISOString());if(N(e))return e[k]();return R(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},R=e=>(E.has(e)||E.set(e,M(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),E.get(e)),T=e=>t=>53*t^e,U=e=>3221225471&e|e>>>1&1073741824,N=e=>m(e,k),M=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return U(t)},I=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return U(t)},A=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=function(e,t,n,r,s,a,i,o,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return a(s(r(n(t(e)))));case 7:return i(a(s(r(n(t(e))))));case 8:return o(i(a(s(r(n(t(e)))))));case 9:return u(o(i(a(s(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}(I(t[r]),T(O(e[t[r]])));return U(n)},C=e=>A(e,Object.keys(e)),L=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,k,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,k,{value:()=>t,enumerable:!1}),t},$=Symbol.for("effect/Equal");function F(){return 1==arguments.length?e=>P(e,arguments[0]):P(arguments[0],arguments[1])}function P(e,t){if(e===t)return!0;let n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(z(e)&&z(t))return!!(O(e)===O(t)&&e[$](t))||!!S.enabled&&!!S.tester&&S.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(S.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>P(e,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(let r of n)if(!(r in t&&P(e[r],t[r])))return!!S.tester&&S.tester(e,t);return!0}}return!!S.tester&&S.tester(e,t)}}return!!S.enabled&&!!S.tester&&S.tester(e,t)}let z=e=>m(e,$),D=Symbol.for("nodejs.util.inspect.custom"),B=e=>{try{if(m(e,"toJSON")&&h(e.toJSON)&&0===e.toJSON.length)return e.toJSON();if(Array.isArray(e))return e.map(B)}catch(e){return{}}return Y(e)},J=e=>JSON.stringify(e,null,2),V=(e,t=2)=>{if("string"==typeof e)return e;try{return"object"==typeof e?q(e,t):String(e)}catch(t){return String(e)}},q=(e,t)=>{let n=[],r=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&(void 0!==W.fiberRefs&&H(t)?t[G](W.fiberRefs):t):t,t);return n=void 0,r},G=Symbol.for("effect/Inspectable/Redactable"),H=e=>"object"==typeof e&&null!==e&&G in e,W=d("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),Y=e=>H(e)&&void 0!==W.fiberRefs?e[G](W.fiberRefs):e,X=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}},K=Symbol.for("effect/Effect"),Q=Symbol.for("effect/Stream"),Z=Symbol.for("effect/Sink"),ee=Symbol.for("effect/Channel"),et={_R:e=>e,_E:e=>e,_A:e=>e,_V:"3.12.0"},en={[K]:et,[Q]:et,[Z]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[ee]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[$](e){return this===e},[k](){return L(this,R(this))},[Symbol.iterator](){return new w(new j(this))},pipe(){return X(this,arguments)}},er={[k](){return L(this,C(this))},[$](e){let t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(let n of t)if(!(n in e&&F(this[n],e[n])))return!1;return!0}},es=Symbol.for("effect/Option"),ea={...en,[es]:{_A:e=>e},[D](){return this.toJSON()},toString(){return J(this.toJSON())}},ei=O("None"),eo=Object.assign(Object.create(ea),{_tag:"None",_op:"None",[$]:e=>eu(e)&&ec(e),[k]:()=>ei,toJSON(){return{_id:"Option",_tag:this._tag}}}),eu=e=>m(e,es),ec=e=>"None"===e._tag,el=e=>"Some"===e._tag,ed=Symbol.for("effect/Either");Symbol.iterator,()=>ep;let ep={next:()=>({done:!0,value:void 0})};Object.fromEntries,(e,t)=>{let n=[];for(let r of ef(e))n.push(t(r,e[r]));return n};let ef=e=>Object.keys(e),eh=e=>Array.isArray(e)?e:Array.from(e),eg=e=>Array.isArray(e)?e:[e],ex=Symbol.for("effect/Context/Tag"),em=Symbol.for("effect/Context/Reference"),ev=Symbol.for("effect/STM"),eb={...en,_op:"Tag",[ev]:et,[ex]:{_Service:e=>e,_Identifier:e=>e},toString(){return J(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[D](){return this.toJSON()},of:e=>e,context(e){return ek(this,e)}},ey={...eb,[em]:em},ew=Symbol.for("effect/Context"),e_={[ew]:{_Services:e=>e},[$](e){if(eE(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!F(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[k](){return L(this,M(this.unsafeMap.size))},pipe(){return X(this,arguments)},toString(){return J(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(B)}},[D](){return this.toJSON()}},ej=e=>{let t=Object.create(e_);return t.unsafeMap=e,t},eS=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let n=e.stack.split("\n");if(n.length>2){let e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},eE=e=>m(e,ew),ek=(e,t)=>ej(new Map([[e.key,t]])),eO=i(3,(e,t,n)=>{let r=new Map(e.unsafeMap);return r.set(t.key,n),ej(r)}),eR=d("effect/Context/defaultValueCache",()=>new Map),eT=e=>{if(eR.has(e.key))return eR.get(e.key);let t=e.defaultValue();return eR.set(e.key,t),t},eU=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):eT(t),eN=i(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(em in t)return eT(t);throw eS(t)}return e.unsafeMap.get(t.key)}),eM=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();function r(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(r,eb),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},eI=()=>(e,t)=>{let n=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=Error();function s(){}return Error.stackTraceLimit=n,Object.setPrototypeOf(s,ey),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get:()=>r.stack}),s},eA=Symbol.for("effect/Micro"),eC=Symbol.for("effect/Micro/MicroExit"),eL=e=>"object"==typeof e&&null!==e&&eA in e,e$=Symbol.for("effect/Micro/MicroCause"),eF={_E:o};class eP extends globalThis.Error{_tag;traces;[e$];constructor(e,t,n){let r,s,a;let i=`MicroCause.${e}`;if(t instanceof globalThis.Error){r=`(${i}) ${t.name}`;let e=(s=t.message).split("\n").length;a=t.stack?`(${i}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${r}: ${s}`}else r=i,s=V(t,0),a=`${r}: ${s}`;n.length>0&&(a+=`
    ${n.join("\n    ")}`),super(s),this._tag=e,this.traces=n,this[e$]=eF,this.name=r,this.stack=a}pipe(){return X(this,arguments)}toString(){return this.stack}[D](){return this.stack}}class ez extends eP{error;constructor(e,t=[]){super("Fail",e,t),this.error=e}}let eD=(e,t=[])=>new ez(e,t);class eB extends eP{defect;constructor(e,t=[]){super("Die",e,t),this.defect=e}}let eJ=(e,t=[])=>new eB(e,t);class eV extends eP{constructor(e=[]){super("Interrupt","interrupted",e)}}let eq=(e=[])=>new eV(e),eG=e=>"Fail"===e._tag,eH=e=>"Interrupt"===e._tag,eW=e=>"Fail"===e._tag?e.error:"Die"===e._tag?e.defect:e,eY=i(2,(e,t)=>{let n=[...e.traces,t];switch(e._tag){case"Die":return eJ(e.defect,n);case"Interrupt":return eq(n);case"Fail":return eD(e.error,n)}}),eX=Symbol.for("effect/Micro/MicroFiber"),eK={_A:o,_E:o};class eQ{context;interruptible;[eX];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,t=!0){this.context=e,this.interruptible=t,this[eX]=eK}getRef(e){return eU(this.context,e)}addObserver(e){return this._exit?(e(this._exit),u):(this._observers.push(e),()=>{let t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)})}_interrupted=!1;unsafeInterrupt(){!this._exit&&(this._interrupted=!0,this.interruptible&&this.evaluate(tU))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(void 0!==this._yielded){let e=this._yielded;this._yielded=void 0,e()}let t=this.runLoop(e);if(t===e7)return;let n=eZ.interruptChildren&&eZ.interruptChildren(this);if(void 0!==n)return this.evaluate(tS(n,()=>t));this._exit=t;for(let e=0;e<this._observers.length;e++)this._observers[e](t);this._observers.length=0}runLoop(e){let t=!1,n=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!t&&this.getRef(tB).shouldYield(this)){t=!0;let e=n;n=tS(tu,()=>e)}if((n=n[e4](this))===e7){let e=this._yielded;if(eC in e)return this._yielded=void 0,e;return e7}}}catch(e){if(!m(n,e4))return tN(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`);return tN(e)}}getCont(e){for(;;){let t=this._stack.pop();if(!t)return;let n=t[e6]&&t[e6](this);if(n)return{[e]:n};if(t[e])return t}}_yielded=void 0;yieldWith(e){return this._yielded=e,e7}children(){return this._children??=new Set}}let eZ=d("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),e0=e=>to(()=>{for(let t of e)t.unsafeInterrupt();let t=e[Symbol.iterator](),n=to(()=>{let e=t.next();for(;!e.done;){if(e.value.unsafePoll()){e=t.next();continue}let r=e.value;return tm(e=>{r.addObserver(t=>{e(n)})})}return tI});return n}),e1=Symbol.for("effect/Micro/identifier"),e2=Symbol.for("effect/Micro/args"),e4=Symbol.for("effect/Micro/evaluate"),e3=Symbol.for("effect/Micro/successCont"),e5=Symbol.for("effect/Micro/failureCont"),e6=Symbol.for("effect/Micro/ensureCont"),e7=Symbol.for("effect/Micro/Yield"),e8={...en,_op:"Micro",[eA]:{_A:o,_E:o,_R:o},pipe(){return X(this,arguments)},[Symbol.iterator](){return new w(new j(this))},toJSON(){return{_id:"Micro",op:this[e1],...e2 in this?{args:this[e2]}:void 0}},toString(){return J(this)},[D](){return J(this)}};function e9(e){return tN("Micro.evaluate: Not implemented")}let te=e=>({...e8,[e1]:e.op,[e4]:e.eval??e9,[e3]:e.contA,[e5]:e.contE,[e6]:e.ensure}),tt=e=>{let t=te(e);return function(){let n=Object.create(t);return n[e2]=!1===e.single?arguments:arguments[0],n}},tn=e=>{let t={...te(e),[eC]:eC,_tag:e.op,get[e.prop](){return this[e2]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[e2]}},[$](t){return tO(t)&&t._tag===e.op&&F(this[e2],t[e2])},[k](){return L(this,T(I(e.op))(O(this[e2])))}};return function(e){let n=Object.create(t);return n[e2]=e,n[e3]=void 0,n[e5]=void 0,n[e6]=void 0,n}},tr=tn({op:"Success",prop:"value",eval(e){let t=e.getCont(e3);return t?t[e3](this[e2],e):e.yieldWith(this)}}),ts=tn({op:"Failure",prop:"cause",eval(e){let t=e.getCont(e5);for(;eH(this[e2])&&t&&e.interruptible;)t=e.getCont(e5);return t?t[e5](this[e2],e):e.yieldWith(this)}}),ta=e=>ts(eD(e)),ti=tt({op:"Sync",eval(e){let t=this[e2](),n=e.getCont(e3);return n?n[e3](t,e):e.yieldWith(tR(t))}}),to=tt({op:"Suspend",eval(e){return this[e2]()}}),tu=tt({op:"Yield",eval(e){let t=!1;return e.getRef(tB).scheduleTask(()=>{t||e.evaluate(tI)},this[e2]??0),e.yieldWith(()=>{t=!0})}})(0),tc=e=>tN(e),tl=tr(void 0),td=e=>to(()=>{try{return tr(e.try())}catch(t){return ta(e.catch(t))}}),tp=e=>tg(function(t,n){e(n).then(e=>t(tr(e)),e=>t(tc(e)))},0!==e.length),tf=e=>tg(function(t,n){try{e.try(n).then(e=>t(tr(e)),n=>t(ta(e.catch(n))))}catch(n){t(ta(e.catch(n)))}},0!==e.try.length),th=tt({op:"WithMicroFiber",eval(e){return this[e2](e)}}),tg=tt({op:"Async",single:!1,eval(e){let t=this[e2][0],n=!1,r=!1,s=this[e2][1]?new AbortController:void 0,a=t(t=>{n||(n=!0,r?e.evaluate(t):r=t)},s?.signal);return!1!==r?r:(r=!0,e._yielded=()=>{n=!0},void 0===s&&void 0===a||e._stack.push(tx(()=>(n=!0,s?.abort(),a??tI))),e7)}}),tx=tt({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(t6(!0)))},contE(e,t){return eH(e)?tS(this[e2](),()=>ts(e)):ts(e)}}),tm=e=>tg(e,e.length>=2),tv=(...e)=>to(()=>tb(1===e.length?e[0]():e[1].call(e[0]))),tb=tt({op:"Iterator",contA(e,t){let n=this[e2].next(e);return n.done?tr(n.value):(t._stack.push(this),function(e){if("object"==typeof e&&null!==e&&_ in e)return e[_]();throw Error(y("yieldWrapGet"))}(n.value))},eval(e){return this[e3](void 0,e)}}),ty=i(2,(e,t)=>tk(e,e=>t)),tw=i(2,(e,t)=>tS(e,e=>{let n=eL(t)?t:"function"==typeof t?t(e):t;return eL(n)?n:tr(n)})),t_=i(2,(e,t)=>tS(e,e=>{let n=eL(t)?t:"function"==typeof t?t(e):t;return eL(n)?ty(n,e):tr(e)})),tj=e=>t0(e,{onFailure:tT,onSuccess:tR}),tS=i(2,(e,t)=>{let n=Object.create(tE);return n[e2]=e,n[e3]=t,n}),tE=te({op:"OnSuccess",eval(e){return e._stack.push(this),this[e2]}}),tk=i(2,(e,t)=>tS(e,e=>tr(t(e)))),tO=e=>m(e,eC),tR=tr,tT=ts,tU=tT(eq()),tN=e=>tT(eJ(e)),tM=e=>"Failure"===e._tag,tI=tR(void 0),tA=e=>{for(let t of e)if("Failure"===t._tag)return t;return tI},tC="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class tL{tasks=[];running=!1;scheduleTask(e,t){this.tasks.push(e),this.running||(this.running=!0,tC(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let e=this.tasks;this.tasks=[];for(let t=0,n=e.length;t<n;t++)e[t]()}shouldYield(e){return e.currentOpCount>=e.getRef(tz)}flush(){for(;this.tasks.length>0;)this.runTasks()}}let t$=e=>th(t=>tr(eN(t.context,e))),tF=i(2,(e,t)=>th(n=>{let r=n.context;return n.context=t(r),t4(e,()=>(n.context=r,tl))})),tP=i(3,(e,t,n)=>tF(e,eO(t,n)));class tz extends eI()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class tD extends eI()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){}class tB extends eI()("effect/Micro/currentScheduler",{defaultValue:()=>new tL}){}let tJ=i(e=>eL(e[0]),(e,t,n)=>tS(e,e=>t(e)?tr(e):ta(n(e)))),tV=i(2,(e,t)=>{let n=Object.create(tq);return n[e2]=e,n[e5]=t,n}),tq=te({op:"OnFailure",eval(e){return e._stack.push(this),this[e2]}}),tG=i(3,(e,t,n)=>tV(e,e=>t(e)?n(e):ts(e))),tH=i(3,(e,t,n)=>tG(e,t,e=>tw(n(e),ts(e)))),tW=i(2,(e,t)=>tH(e,eG,e=>t(e.error))),tY=i(3,(e,t,n)=>tG(e,e=>eG(e)&&t(e.error),e=>n(e.error))),tX=i(3,(e,t,n)=>tY(e,v(t),n)),tK=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let n=e=>n=>t5(n,n=>ts(function(e,n){let r=t.stack;if(!r)return n;let s=r.split("\n")[2]?.trim().replace(/^at /,"");if(!s)return n;let a=s.match(/\((.*)\)$/);return eY(n,`at ${e} (${a?a[1]:s})`)}(e,n)));return 2==arguments.length?n(arguments[1])(arguments[0]):n(arguments[0])},tQ=i(2,(e,t)=>{let n=Object.create(tZ);return n[e2]=e,n[e3]=t.onSuccess,n[e5]=t.onFailure,n}),tZ=te({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[e2]}}),t0=null,t1=Symbol.for("effect/Micro/MicroScope");class t2{[t1];state={_tag:"Open",finalizers:new Set};constructor(){this[t1]=t1}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return to(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),tl):e(this.state.exit))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return to(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},tS(ne(t,t=>tj(t(e))),tA)}return tl})}get fork(){return ti(()=>{let e=new t2;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>ti(()=>this.unsafeRemoveFinalizer(t))),e})}}let t4=i(2,(e,t)=>t8(n=>tQ(n(e),{onFailure:e=>tS(t(tT(e)),()=>ts(e)),onSuccess:e=>tS(t(tR(e)),()=>tr(e))}))),t3=i(3,(e,t,n)=>t4(e,e=>t(e)?n(e):tI)),t5=i(2,(e,t)=>t3(e,tM,e=>t(e.cause))),t6=tt({op:"SetInterruptible",ensure(e){if(e.interruptible=this[e2],e._interrupted&&e.interruptible)return()=>tU}}),t7=e=>th(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(t6(!1)),t._interrupted)?tU:e),t8=e=>th(t=>t.interruptible?(t.interruptible=!1,t._stack.push(t6(!0)),e(t7)):e(o)),t9=tt({op:"While",contA(e,t){return(this[e2].step(e),this[e2].while())?(t._stack.push(this),this[e2].body()):tI},eval(e){return this[e2].while()?(e._stack.push(this),this[e2].body()):tI}}),ne=(e,t,n)=>th(r=>{let s=n?.concurrency==="inherit"?r.getRef(tD):n?.concurrency??1,a="unbounded"===s?Number.POSITIVE_INFINITY:Math.max(1,s),i=eh(e),o=i.length;if(0===o)return n?.discard?tl:tr([]);let u=n?.discard?void 0:Array(o),c=0;return 1===a?ty(t9({while:()=>c<i.length,body:()=>t(i[c],c),step:u?e=>u[c++]=e:e=>c++}),u):tm(e=>{let n;let s=new Set,l=0,d=0,p=!1,f=!1;return function h(){for(p=!0;l<a&&c<o;){let g=c,x=i[g];c++,l++;try{let i=nt(r,t(x,g),!0,!0);s.add(i),i.addObserver(t=>{s.delete(i),f||("Failure"===t._tag?void 0===n&&(n=t,o=c,s.forEach(e=>e.unsafeInterrupt())):void 0!==u&&(u[g]=t.value),d++,l--,d===o?e(n??tr(u)):!p&&l<a&&h())})}catch(e){n=tN(e),o=c,s.forEach(e=>e.unsafeInterrupt())}}p=!1}(),to(()=>(f=!0,c=o,e0(s)))})}),nt=(e,t,n=!1,r=!1)=>{let s=new eQ(e.context,e.interruptible);return r||(e.children().add(s),s.addObserver(()=>e.children().delete(s))),n?s.evaluate(t):e.getRef(tB).scheduleTask(()=>s.evaluate(t),0),s},nn=(e,t)=>{let n=new eQ(tB.context(t?.scheduler??new tL));if(n.evaluate(e),t?.signal){if(t.signal.aborted)n.unsafeInterrupt();else{let e=()=>n.unsafeInterrupt();t.signal.addEventListener("abort",e,{once:!0}),n.addObserver(()=>t.signal.removeEventListener("abort",e))}}return n},nr=(e,t)=>new Promise((n,r)=>{nn(e,t).addObserver(n)}),ns=(e,t)=>nr(e,t).then(e=>{if("Failure"===e._tag)throw e.cause;return e.value}),na=e=>{let t=new tL,n=nn(e,{scheduler:t});return t.flush(),n._exit??tN(n)},ni=e=>{let t=na(e);if("Failure"===t._tag)throw t.cause;return t.value},no=function(){class e extends globalThis.Error{}return Object.assign(e.prototype,e8,er,{[e1]:"Failure",[e4](){return ta(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[D](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}),e}(),nu=class extends no{constructor(e){super(),e&&Object.assign(this,e)}},nc=e=>{class t extends nu{_tag=e}return t.prototype.name=e,t},nl={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}},nd={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}},np={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}},nf={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};class nh extends nc("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class ng extends nc("FetchError"){}class nx extends nc("InvalidJson"){}class nm extends nc("BadRequestError"){getMessage(){return b(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}class nv extends nc("UploadAborted"){}class nb extends nc("UploadAborted"){}function ny(e){return Object.keys(e)}let nw=e=>tv(function*(){let t="undefined"!=typeof window?window.location.origin:process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:"http://localhost:3000",n=yield*td({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new nh(e??"/api/uploadthing")});return"/"===n.pathname&&(n.pathname="/api/uploadthing"),n}),n_=e=>e instanceof URL?e:ni(nw(e));function nj(){}function nS(e,...t){return"function"==typeof e?e(...t):e}let nE={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,INVALID_SERVER_CONFIG:500,FILE_LIMIT_EXCEEDED:500};class nk extends nu{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:b(t.cause)&&f(t.cause.status)&&p(t.cause.statusText)?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):p(t.cause)?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(nk.toObject(e))}}let nO=e=>new nk({code:"INTERNAL_CLIENT_ERROR",message:"Something went wrong. Please report this to UploadThing.",cause:e});class nR extends eM("uploadthing/Fetch")(){}let nT=(e,t)=>tS(t$(nR),n=>{let r=new Headers(t?.headers??[]),s={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(r)};return tf({try:s=>n(e,{...t,headers:r,signal:s}),catch:e=>new ng({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:s})}).pipe(tW(e=>ti(()=>console.error(e.input))),tk(e=>Object.assign(e,{requestUrl:s.url})),tK("fetch"))}),nU=e=>tf({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new nx({error:t,input:e.requestUrl})}).pipe(tJ(({ok:e})=>e,({json:t,status:n})=>new nm({status:n,message:`Request to ${e.requestUrl} failed with status ${n}`,json:t})),tk(({json:e})=>e),tK("parseJson")),nN=(e,t)=>"all"===t?e:"fine"===t?Math.round(e):10*Math.floor(e/10),nM=e=>{let t=Array.isArray(e)?e:ny(e);return t.includes("blob")?[]:t.map(e=>"pdf"===e?"application/pdf":e.includes("/")?e:"audio"===e?["audio/*",...ny(nl)].join(", "):"image"===e?["image/*",...ny(nd)].join(", "):"text"===e?["text/*",...ny(np)].join(", "):"video"===e?["video/*",...ny(nf)].join(", "):`${e}/*`)},nI=e=>({fileTypes:e?ny(e):[],multiple:(e?Object.values(e).map(e=>e.maxFileCount):[]).some(e=>e&&e>1)}),nA=e=>e.charAt(0).toUpperCase()+e.slice(1),nC=e=>{if(!e)return"";let t=ny(e),n=t.map(e=>"blob"===e?"file":e);if(n.length>1){let e=n.pop();return`${n.join("s, ")} and ${e}s`}let r=t[0],s=n[0];if(!r||!s)return"";let{maxFileSize:a,maxFileCount:i,minFileCount:o}=e[r];return i&&i>1?o>1?`${o} - ${i} ${s}s up to ${a}`:`${s}s up to ${a}, max ${i}`:`${s} (${a})`},nL=e=>nA(nC(e)),n$=(e,t)=>{if("string"==typeof e)return e;if("function"==typeof e){let n=e(t);if("string"==typeof n)return n}return""},nF=(e,t)=>{if("object"==typeof e)return e;if("function"==typeof e){let n=e(t);if("object"==typeof n)return n}return{}},nP=(e,t)=>e?"function"!=typeof e?e:"function"==typeof e?e(t):void 0:null,nz=(...e)=>e.filter(Boolean).join(" ");new TextEncoder;let nD=()=>{let e,t;let n=new AbortController;return{promise:new Promise((n,r)=>{e=n,t=r}),ac:n,resolve:e,reject:t}},nB=e=>{console.warn(`⚠️ [uploadthing][deprecated] ${e}`)},nJ=e=>{let t=new URL(e.url),n=new URLSearchParams(t.search);return n.set("actionType",e.actionType),n.set("slug",e.slug),t.search=n.toString(),t},nV=e=>(t,n)=>tv(function*(){let r=nJ({url:e.url,slug:e.endpoint,actionType:t}),s=new Headers((yield*tp(async()=>"function"==typeof e.headers?await e.headers():e.headers)));return s.set("x-uploadthing-package",e.package),s.set("x-uploadthing-version","7.6.0"),s.set("Content-Type","application/json"),yield*nT(r,{method:"POST",body:JSON.stringify(n),headers:s}).pipe(tw(nU),tk(o),tX("FetchError",e=>ta(new nk({code:"INTERNAL_CLIENT_ERROR",message:`Failed to report event "${t}" to UploadThing server`,cause:e}))),tX("BadRequestError",e=>ta(new nk({code:function(e){for(let[t,n]of Object.entries(nE))if(n===e)return t;return"INTERNAL_SERVER_ERROR"}(e.status),message:e.getMessage(),cause:e.json}))),tX("InvalidJson",e=>ta(new nk({code:"INTERNAL_CLIENT_ERROR",message:"Failed to parse response from UploadThing server",cause:e}))))}),nq=(e,t,n,r)=>tm(s=>{let a=new XMLHttpRequest;a.open("PUT",n.url,!0),a.setRequestHeader("Range",`bytes=${t}-`),a.setRequestHeader("x-uploadthing-version","7.6.0"),a.responseType="json";let i=0;a.upload.addEventListener("progress",({loaded:e})=>{let t=e-i;r?.({loaded:e,delta:t}),i=e}),a.addEventListener("load",()=>{a.status>=200&&a.status<300&&b(a.response)?m(a.response,"error")?s(new nk({code:"UPLOAD_FAILED",message:String(a.response.error),data:a.response})):s(tr(a.response)):s(new nk({code:"UPLOAD_FAILED",message:`XHR failed ${a.status} ${a.statusText}`,data:a.response}))}),a.addEventListener("error",()=>{s(new nk({code:"UPLOAD_FAILED"}))});let o=new FormData;return"uri"in e?o.append("file",{uri:e.uri,type:e.type,name:e.name,...t>0&&{range:t}}):o.append("file",t>0?e.slice(t):e),a.send(o),ti(()=>a.abort())}),nG=(e,t,n)=>nT(t.url,{method:"HEAD"}).pipe(tk(({headers:e})=>parseInt(e.get("x-ut-range-start")??"0",10)),t_(e=>n.onUploadProgress?.({delta:e,loaded:e})),tS(r=>nq(e,r,t,e=>n.onUploadProgress?.({delta:e.delta,loaded:e.loaded+r}))),tk(o),tk(n=>({name:e.name,size:e.size,key:t.key,lastModified:e.lastModified,serverData:n.serverData,get url(){return nB("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),n.url},get appUrl(){return nB("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),n.appUrl},ufsUrl:n.ufsUrl,customId:t.customId,type:e.type,fileHash:n.fileHash}))),nH=(e,t)=>{let n=nV({endpoint:String(e),package:t.package,url:t.url,headers:t.headers}),r=t.files.reduce((e,t)=>e+t.size,0),s=0;return tS(n("upload",{input:"input"in t?t.input:null,files:t.files.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))}),e=>ne(e,(e,n)=>tS(ti(()=>t.onUploadBegin?.({file:t.files[n].name})),()=>nG(t.files[n],e,{onUploadProgress:e=>{s+=e.delta,t.onUploadProgress?.({file:t.files[n],progress:e.loaded/t.files[n].size*100,loaded:e.loaded,delta:e.delta,totalLoaded:s,totalProgress:s/r})}})),{concurrency:6}))},nW=e=>{let t=new Proxy(nj,{get:(e,t)=>t});return{uploadFiles:(n,r)=>{let s="function"==typeof n?n(t):n,a=e?.fetch??window.fetch;return nH(s,{...r,skipPolling:{},url:n_(e?.url),package:e?.package??"uploadthing/client",input:r.input}).pipe(tP(nR,a),e=>nr(e,r.signal&&{signal:r.signal})).then(e=>{if("Success"===e._tag)return e.value;if("Interrupt"===e.cause._tag)throw new nb;throw eW(e.cause)})},createUpload:async(n,r)=>{let s=new Map,a=nV({endpoint:String("function"==typeof n?n(t):n),package:e?.package??"uploadthing/client",url:n_(e?.url),headers:r.headers}),i=e?.fetch??window.fetch,o=await ns(a("upload",{input:"input"in r?r.input:null,files:r.files.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))}).pipe(tP(nR,i))),u=r.files.reduce((e,t)=>e+t.size,0),c=0,l=(e,t)=>nG(e,t,{onUploadProgress:t=>{c+=t.delta,r.onUploadProgress?.({...t,file:e,progress:Math.round(t.loaded/e.size*100),totalLoaded:c,totalProgress:Math.round(c/u*100)})}}).pipe(tP(nR,i));for(let[e,t]of o.entries()){let n=r.files[e];if(!n)continue;let a=nD();s.set(n,{deferred:a,presigned:t}),nr(l(n,t),{signal:a.ac.signal}).then(e=>{if("Success"===e._tag)return a.resolve(e.value);if("Interrupt"===e.cause._tag)throw new nv;throw eW(e.cause)}).catch(e=>{e instanceof nv||a.reject(e)})}return{pauseUpload:e=>{for(let t of eg(e??r.files)){let e=s.get(t);if(!e)return;if(e.deferred.ac.signal.aborted)throw new nb;e.deferred.ac.abort()}},resumeUpload:e=>{for(let t of eg(e??r.files)){let e=s.get(t);if(!e)throw"No upload found";e.deferred.ac=new AbortController,nr(l(t,e.presigned),{signal:e.deferred.ac.signal}).then(t=>{if("Success"===t._tag)return e.deferred.resolve(t.value);if("Interrupt"===t.cause._tag)throw new nv;throw eW(t.cause)}).catch(t=>{t instanceof nv||e.deferred.reject(t)})}},done:async e=>{let t=[];for(let n of eg(e??r.files)){let e=s.get(n);if(!e)throw"No upload found";t.push(e.deferred.promise)}let n=await Promise.all(t);return e?n[0]:n}}},routeRegistry:t}};var nY={uploadthing:"^7.2.0"};let nX=()=>void 0;function nK(e){let t=a.useRef(nQ);nX(()=>{t.current=e},[e]);let n=a.useRef();return n.current||(n.current=function(){return t.current.apply(this,arguments)}),n.current}function nQ(){throw Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}let nZ=(e,t,n)=>{let r=globalThis.__UPLOADTHING,{data:s}=function(e,t,n){(0,a.useRef)({}),(0,a.useRef)(!1);let r={error:void 0,data:void 0},[s,i]=(0,a.useReducer)((e,t)=>{switch(t.type){case"loading":return{...r};case"fetched":return{...r,data:t.payload};case"error":return{...r,error:t.payload};default:return e}},r);return s}(0,r||t.href);return(r??s)?.find(e=>e.slug===n)?.config},n0=function(e,t,n,r){let s=r?.uploadProgressGranularity??"coarse",{uploadFiles:i,routeRegistry:o}=nW({fetch:n,url:e,package:"@uploadthing/react"}),[u,c]=(0,a.useState)(!1),l=(0,a.useRef)(0),d=(0,a.useRef)(new Map);return{startUpload:nK(async(...e)=>{let n=await r?.onBeforeUploadBegin?.(e[0])??e[0],a=e[1];c(!0),n.forEach(e=>d.current.set(e,0)),r?.onUploadProgress?.(0);try{let e=await i(t,{signal:r?.signal,headers:r?.headers,files:n,onUploadProgress:e=>{if(!r?.onUploadProgress)return;d.current.set(e.file,e.progress);let t=0;d.current.forEach(e=>{t+=e});let n=nN(Math.min(100,t/d.current.size),s);n!==l.current&&(r.onUploadProgress(n),l.current=n)},onUploadBegin({file:e}){r?.onUploadBegin&&r.onUploadBegin(e)},input:a});return await r?.onClientUploadComplete?.(e),e}catch(t){let e;if(t instanceof nb)throw t;t instanceof nk?e=t:console.error("Something went wrong. Please contact UploadThing and provide the following cause:",(e=nO(t)).cause instanceof Error?e.cause.toString():e.cause),await r?.onUploadError?.(e)}finally{c(!1),d.current=new Map,l.current=0}}),isUploading:u,routeConfig:nZ(n,e,nS(t,o))}},n1=e=>{!function(e,t,n){!function(e,t){let n=/(\d+)\.?(\d+)?\.?(\d+)?/,r=n.exec(e);if(!r?.[0])throw Error(`Invalid semver requirement: ${e}`);let s=n.exec(t);if(!s?.[0])throw Error(`Invalid semver to check: ${t}`);let[a,i,o,u]=r,[c,l,d,p]=s;return e.startsWith("^")?i===l&&(!o||!d||!(o>d)):e.startsWith("~")?i===l&&o===d:i===l&&o===d&&u===p}(t,n)&&console.warn(`!!!WARNING::: ${e} requires "uploadthing@${t}", but version "${n}" is installed`)}("@uploadthing/react",nY.uploadthing,"7.6.0");let t=e?.fetch??globalThis.fetch,n=n_(e?.url),r=nW({fetch:t,url:n,package:"@uploadthing/react"});return{useUploadThing:function(e,r){return n0(n,e,t,r)},...r,getRouteConfig:function(e){let t=globalThis.__UPLOADTHING,n=nS(e,r.routeRegistry),s=t?.find(e=>e.slug===n)?.config;if(!s)throw Error(`No config found for endpoint "${n.toString()}". Please make sure to use the NextSSRPlugin in your Next.js app.`);return s}}},n2=e=>{let t=nK(e);(0,a.useEffect)(()=>{let e=new AbortController;return window.addEventListener("paste",t,{signal:e.signal}),()=>{e.abort()}},[t])};function n4(){return(0,s.jsx)("svg",{className:"z-10 block h-5 w-5 animate-spin align-middle text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 576 512",children:(0,s.jsx)("path",{fill:"currentColor",d:"M256 32C256 14.33 270.3 0 288 0C429.4 0 544 114.6 544 256C544 302.6 531.5 346.4 509.7 384C500.9 399.3 481.3 404.6 465.1 395.7C450.7 386.9 445.5 367.3 454.3 351.1C470.6 323.8 480 291 480 255.1C480 149.1 394 63.1 288 63.1C270.3 63.1 256 49.67 256 31.1V32z"})})}function n3({className:e,cn:t,...n}){return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:t("fill-none stroke-current stroke-2",e),...n,children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"m4.9 4.9 14.2 14.2"})]})}function n5(e){let{mode:t="auto",appendOnPaste:n=!1,cn:r=nz}=e.config??{},i=(0,a.useRef)(new AbortController),o=(0,a.useRef)(null),[u,c]=(0,a.useState)(e.__internal_upload_progress??0),[l,d]=(0,a.useState)([]),{startUpload:p,isUploading:f,routeConfig:h}=n0(n_(e.url),e.endpoint,e.fetch??globalThis.fetch,{signal:i.current.signal,headers:e.headers,onClientUploadComplete:t=>{o.current&&(o.current.value=""),d([]),e.onClientUploadComplete?.(t),c(0)},uploadProgressGranularity:e.uploadProgressGranularity,onUploadProgress:t=>{c(t),e.onUploadProgress?.(t)},onUploadError:e.onUploadError,onUploadBegin:e.onUploadBegin,onBeforeUploadBegin:e.onBeforeUploadBegin}),{fileTypes:g,multiple:x}=nI(h),m=!!(e.__internal_button_disabled??e.disabled),v=(()=>{let t="ready"===e.__internal_state||g.length>0;return e.__internal_state?e.__internal_state:m?"disabled":t?f?"uploading":"ready":"readying"})(),b=(0,a.useCallback)(t=>{p(t,"input"in e?e.input:void 0).catch(t=>{if(t instanceof nb)e.onUploadAborted?.();else throw t})},[e,p]),y=(0,a.useMemo)(()=>({type:"file",ref:o,multiple:x,accept:nM(g).join(", "),onChange:n=>{if(!n.target.files)return;let r=Array.from(n.target.files);if(e.onChange?.(r),"manual"===t){d(r);return}b(r)},disabled:m,tabIndex:m?-1:0}),[e,m,g,t,x,b]);n2(r=>{if(!n||document.activeElement!==o.current)return;let s=function(e){let t=e.clipboardData?.items;if(t)return Array.from(t).reduce((e,t)=>{let n=t.getAsFile();return n?[...e,n]:e},[])}(r);if(!s)return;let a=s;d(t=>(a=[...t,...s],e.onChange?.(a),a)),"auto"===t&&b(l)});let w=(0,a.useMemo)(()=>({ready:"readying"!==v,isUploading:"uploading"===v,uploadProgress:u,fileTypes:g,files:l}),[g,l,v,u]);return(0,s.jsxs)("div",{className:r("flex flex-col items-center justify-center gap-1",e.className,n$(e.appearance?.container,w)),style:{"--progress-width":`${u}%`,...nF(e.appearance?.container,w)},"data-state":v,children:[(0,s.jsxs)("label",{className:r("group relative flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled:pointer-events-none","data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed","data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400","after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:content-[''] data-[state=uploading]:after:bg-blue-600",n$(e.appearance?.button,w)),style:nF(e.appearance?.button,w),"data-state":v,"data-ut-element":"button",onClick:e=>{if("uploading"===v){e.preventDefault(),e.stopPropagation(),i.current.abort(),i.current=new AbortController;return}"manual"===t&&l.length>0&&(e.preventDefault(),e.stopPropagation(),b(l))},children:[(0,s.jsx)("input",{...y,className:"sr-only"}),(()=>{let n=nP(e.content?.button,w);if(n)return n;switch(v){case"readying":return"Loading...";case"uploading":if(u>=100)return(0,s.jsx)(n4,{});return(0,s.jsxs)("span",{className:"z-50",children:[(0,s.jsxs)("span",{className:"block group-hover:hidden",children:[Math.round(u),"%"]}),(0,s.jsx)(n3,{cn:r,className:"hidden size-4 group-hover:block"})]});default:if("manual"===t&&l.length>0)return`Upload ${l.length} file${1===l.length?"":"s"}`;return`Choose File${y.multiple?"(s)":""}`}})()]}),"manual"===t&&l.length>0?(0,s.jsx)("button",{onClick:()=>{d([]),o.current&&(o.current.value=""),e.onChange?.([])},className:r("h-[1.25rem] cursor-pointer rounded border-none bg-transparent text-gray-500 transition-colors hover:bg-slate-200 hover:text-gray-600",n$(e.appearance?.clearBtn,w)),style:nF(e.appearance?.clearBtn,w),"data-state":v,"data-ut-element":"clear-btn",children:nP(e.content?.clearBtn,w)??"Clear"}):(0,s.jsx)("div",{className:r("h-[1.25rem] text-xs leading-5 text-gray-600",n$(e.appearance?.allowedContent,w)),style:nF(e.appearance?.allowedContent,w),"data-state":v,"data-ut-element":"allowed-content",children:nP(e.content?.allowedContent,w)??nL(h)})]})}}};