"use strict";(()=>{var e={};e.id=7,e.ids=[7],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3913:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>c});var r={};s.r(r),s.d(r,{DELETE:()=>f,GET:()=>d,PUT:()=>l});var i=s(9303),n=s(8716),a=s(670),o=s(7070),p=s(3524);let u=new p.PrismaClient;async function d(e,{params:t}){let{id:s}=t;try{let e=await u.event.findUnique({where:{id:s}});if(!e)return o.NextResponse.json({message:"Event not found"},{status:404});let t={...e,djs:e.djs&&"string"==typeof e.djs?e.djs.split(",").map(e=>e.trim()).filter(e=>""!==e):e.djs||[],specials:e.specials&&"string"==typeof e.specials?e.specials.split(",").map(e=>e.trim()).filter(e=>""!==e):e.specials||[]};return o.NextResponse.json(t)}catch(e){return console.error(`Error fetching event ${s}:`,e),o.NextResponse.json({message:"Error fetching event"},{status:500})}}async function l(e,{params:t}){let{id:s}=t;try{let t=await e.json(),r={};if(void 0!==t.title){if("string"==typeof t.title&&""!==t.title.trim())r.title=t.title;else if("string"==typeof t.title&&""===t.title.trim())return o.NextResponse.json({message:"Title, if provided for update, must be a non-empty string"},{status:400})}if(void 0!==t.date){if("string"!=typeof t.date||isNaN(Date.parse(t.date)))return o.NextResponse.json({message:"Date, if provided for update, must be a valid date string (e.g., YYYY-MM-DD)"},{status:400});r.date=new Date(t.date)}if(void 0!==t.time){if("string"!=typeof t.time||""===t.time.trim())return o.NextResponse.json({message:"Time, if provided for update, must be a non-empty string or null/empty to clear"},{status:400});r.time=t.time}if(void 0!==t.djs){if(!(Array.isArray(t.djs)&&t.djs.every(e=>"string"==typeof e)))return o.NextResponse.json({message:"DJs, if provided for update, must be an array of strings"},{status:400});{let e=t.djs.filter(e=>""!==e.trim());r.djs=e.length>0?e.join(", "):null}}if(void 0!==t.specials){if(!(Array.isArray(t.specials)&&t.specials.every(e=>"string"==typeof e)))return o.NextResponse.json({message:"Specials, if provided for update, must be an array of strings"},{status:400});{let e=t.specials.filter(e=>""!==e.trim());r.specials=e.length>0?e.join(", "):null}}if(void 0!==t.imageUrl){if(!("string"==typeof t.imageUrl&&(t.imageUrl.startsWith("http://")||t.imageUrl.startsWith("https://")||""===t.imageUrl)))return o.NextResponse.json({message:"Image URL, if provided for update, must be a valid URL, an empty string, or null"},{status:400});r.imageUrl=t.imageUrl}if(0===Object.keys(r).length)return o.NextResponse.json({message:"No valid fields provided for update"},{status:400});let i=await u.event.update({where:{id:s},data:r});if(!i)return o.NextResponse.json({message:"Event not found or update failed (unexpected)"},{status:404});return o.NextResponse.json(i)}catch(e){if(console.error(`Error updating event ${s}:`,e),e instanceof p.Prisma.PrismaClientKnownRequestError&&"P2025"===e.code)return o.NextResponse.json({message:"Event not found"},{status:404});return o.NextResponse.json({message:"Error updating event"},{status:500})}}async function f(e,{params:t}){let{id:s}=t;try{return await u.event.delete({where:{id:s}}),o.NextResponse.json({message:"Event deleted successfully"},{status:200})}catch(e){if(console.error(`Error deleting event ${s}:`,e),e instanceof p.Prisma.PrismaClientKnownRequestError&&"P2025"===e.code)return o.NextResponse.json({message:"Event not found"},{status:404});return o.NextResponse.json({message:"Error deleting event"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/events/[id]/route",pathname:"/api/events/[id]",filename:"route",bundlePath:"app/api/events/[id]/route"},resolvedPagePath:"/Users/christianaguilar/Downloads/project/src/app/api/events/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:c,serverHooks:v}=m,j="/api/events/[id]/route";function y(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:c})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972],()=>s(3913));module.exports=r})();